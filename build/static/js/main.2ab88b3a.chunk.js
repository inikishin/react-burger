(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{102:function(e,t,r){e.exports={container:"ingredient_container__21B-C"}},104:function(e,t,r){e.exports={modal:"model-overlay_modal__3gK7B"}},188:function(e,t,r){"use strict";r.r(t),r.d(t,"store",(function(){return xr}));var n=r(1),a=r.n(n),c=r(46),i=r(36),s=r.n(i),o=r(5),d=r(10),u=r(23),l=r.n(u),j=r(194),b=r(107),p=r(2),m=r(7),O=c.c,f=function(){return Object(c.b)()},x=r(58),h=r(4),_=r(102),g=r.n(_),v=r(195),y=r(0);var N=function(e){var t=Object(v.a)({type:"ingredient",item:Object(p.a)({},e.ingredient),collect:function(e){return{isDrag:e.isDragging()}}}),r=Object(m.a)(t,2),n=r[0].isDrag,a=r[1];return n?Object(y.jsx)("div",{}):Object(y.jsxs)("div",{className:g.a.container,ref:a,children:[Object(y.jsx)("img",{src:e.ingredient.image,alt:e.ingredient.name}),e.count?e.count>0&&Object(y.jsx)(h.Counter,{count:e.count,size:"small"}):Object(y.jsx)(y.Fragment,{}),Object(y.jsxs)("p",{className:"text text_type_digits-default",children:[e.ingredient.price," ",Object(y.jsx)(h.CurrencyIcon,{type:"primary"})]}),Object(y.jsx)("p",{className:"text text_type_main-default",children:e.ingredient.name})]})},E=r(47),C=r.n(E),k=r(9),w=r.n(k),S=r(16);function T(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function I(e,t,r){var n=(r=r||{}).expires;if("number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=r.expires=a}n&&n.toUTCString&&(r.expires=n.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var i in r){c+="; "+i;var s=r[i];!0!==s&&(c+="="+s)}document.cookie=c}function L(e){I(e,"",{expires:-1})}var R=function(){var e=Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+T("token")},body:JSON.stringify({ingredients:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T("token")},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+T("token")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H="GET_INGREDIENTS_REQUEST",z="GET_INGREDIENTS_SUCCESS",J="GET_INGREDIENTS_FAILED",Q="ADD_INGREDIENT_DATA",K="DELETE_INGREDIENT_DATA",Z="INCREASE_INGREDIENT_COUNTER",q="DECSEASE_INGREDIENT_COUNTER",V=function(){return function(e){e({type:H}),R().then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(t){if(!t.data)throw new Error("No data");e({type:z,ingredients:t.data})})).catch((function(t){e({type:J})}))}};var Y=function(){var e=Object(d.h)(),t=a.a.useState("bun"),r=Object(m.a)(t,2),c=r[0],i=r[1],s=O((function(e){return Object(p.a)({},e.ingredients)})),u=s.ingredients,l=s.isLoadingIngredients,j=f(),b=Object(x.a)(),_=Object(m.a)(b,2),g=_[0],v=_[1],E=Object(x.a)(),k=Object(m.a)(E,2),w=k[0],S=k[1],T=Object(x.a)(),I=Object(m.a)(T,2),L=I[0],R=I[1];function D(e){i(e),window.location.href="/#"+e}return Object(n.useEffect)((function(){v?i("bun"):S?i("sauce"):R&&i("main")}),[v,S,R]),Object(n.useEffect)((function(){j(V())}),[j]),Object(y.jsx)(y.Fragment,{children:l?Object(y.jsx)("h2",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."}):Object(y.jsxs)("section",{style:{flexBasis:"content",width:"50%"},children:[Object(y.jsxs)("div",{style:{display:"flex"},children:[Object(y.jsx)(h.Tab,{value:"bun",active:"bun"===c,onClick:D,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(y.jsx)(h.Tab,{value:"sauce",active:"sauce"===c,onClick:D,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(y.jsx)(h.Tab,{value:"main",active:"main"===c,onClick:D,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("ul",{className:C.a.ingredients,children:[Object(y.jsx)("h2",{className:"text text_type_main-medium mt-15 mb-15",ref:g,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(y.jsx)("a",{id:"bun"}),u.filter((function(e){return"bun"===e.type})).map((function(t,r){return Object(y.jsx)("li",{children:Object(y.jsx)(o.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:e}},className:C.a.ingredientLink,children:Object(y.jsx)(N,{ingredient:t,count:t.counter})},t._id)},r)})),Object(y.jsx)("h2",{className:"text text_type_main-medium mt-15 mb-15",ref:w,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(y.jsx)("a",{id:"sauce"}),u.filter((function(e){return"sauce"===e.type})).map((function(t,r){return Object(y.jsx)("li",{children:Object(y.jsx)(o.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:e}},className:C.a.ingredientLink,children:Object(y.jsx)(N,{ingredient:t,count:t.counter})},t._id)},r)})),Object(y.jsx)("h2",{className:"text text_type_main-medium mt-15 mb-15",ref:L,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(y.jsx)("a",{id:"main"}),u.filter((function(e){return"main"===e.type})).map((function(t,r){return Object(y.jsx)("li",{children:Object(y.jsx)(o.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:e}},className:C.a.ingredientLink,children:Object(y.jsx)(N,{ingredient:t,count:t.counter})},t._id)},r)}))]})})]})})},X=r(196),$=r(21),ee=r.n($),te=r(80),re=r.n(te);var ne=function(e){return Object(y.jsxs)("div",{className:re.a.bodyContent,children:[Object(y.jsx)("p",{className:"text text_type_digits-large p-15",children:e.orderNumber}),Object(y.jsx)("p",{className:"text text_type_main-medium p-5 mb-10",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(y.jsx)(h.CheckMarkIcon,{type:"primary"}),Object(y.jsx)("p",{className:"text text_type_main-default p-5 mt-10",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(y.jsx)("p",{className:re.a.secondaryText,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},ae=r(48),ce=r.n(ae),ie=r(104),se=r.n(ie);var oe=function(e){return Object(y.jsx)("div",{id:"my-modal",className:se.a.modal,onClick:e.onClose,children:e.children})},de=document.getElementById("modal");var ue=function(e){function t(t){"my-modal"!==t.target.id&&"close-modal"!==t.currentTarget.id&&"Escape"!==t.key||(e.onClose(),t.stopPropagation())}function r(){e.onClose()}return Object(n.useEffect)((function(){return document.addEventListener("keyup",r),function(){document.removeEventListener("keyup",r)}}),[]),de?s.a.createPortal(Object(y.jsx)(oe,{onClose:function(){return t},title:"",children:Object(y.jsxs)("div",{id:"modalContent",className:ce.a.modalContent,children:[Object(y.jsxs)("div",{className:ce.a.modalHeader,children:[Object(y.jsx)("h2",{className:"text text_type_main-medium",children:e.title}),Object(y.jsx)("span",{className:ce.a.close,onClick:t,id:"close-modal",children:Object(y.jsx)(h.CloseIcon,{type:"primary"})})]}),Object(y.jsx)("div",{className:ce.a.modalMain,children:e.children})]})}),de):Object(y.jsx)(y.Fragment,{})},le="GET_ORDER_NUMBER_REQUEST",je="GET_ORDER_NUMBER_SUCCESS",be="GET_ORDER_NUMBER_FAILED",pe="ADD_INGREDIENT_TO_BURGER",me="CHANGE_INGREDIENT_IN_BURGER",Oe="DELETE_INGREDIENT_FROM_BURGER";function fe(e){var t=f(),r=Object(X.a)({accept:"ingredient",collect:function(e){return{isOver:e.isOver()}}}),a=Object(m.a)(r,2),c=a[0].isOver,i=a[1],s=Object(v.a)({type:"ingredient",item:{id:e.item._id,index:e.index,change:!0},collect:function(e){return{isDrag:e.isDragging()}}}),o=Object(m.a)(s,2),d=o[0].isDrag,u=o[1];Object(n.useEffect)((function(){c&&e.setCurrentIndex(e.index+1)}));return Object(y.jsxs)("div",{ref:u,children:[!d&&Object(y.jsxs)("li",{className:"".concat(ee.a.mainItem," p-2"),ref:i,children:[Object(y.jsx)(h.DragIcon,{type:"primary"}),Object(y.jsx)(h.ConstructorElement,{isLocked:!1,text:e.item.name,thumbnail:e.item.image,price:e.item.price,handleClose:function(){t({type:Oe,ingredientIndex:e.index,ingredientId:e.item._id}),t({type:q,ingredient:e.item})}})]}),c&&Object(y.jsx)("li",{className:"".concat(ee.a.mainItem," m-5 p-2")})]})}var xe=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(-1),i=Object(m.a)(c,2),s=i[0],o=i[1],d=O((function(e){return Object(p.a)({},e.order)})),u=d.currentBurger,l=d.order,j=O((function(e){return e.auth})),b=f(),x=u.bun,_=u.main,g=Object(X.a)({accept:"ingredient",drop:function(e){!function(e){e.change?b({type:me,oldIndex:e.index,currentIndex:s}):(b({type:pe,ingredient:e,ingredientIndex:s}),b({type:Z,ingredient:e}))}(e)}}),v=Object(m.a)(g,2)[1],N=Object(X.a)({accept:"ingredient",collect:function(e){return{isOver:e.isOver()}}}),E=Object(m.a)(N,2),C=E[0].isOver,k=E[1];Object(n.useEffect)((function(){C&&o(0)}),[C]),Object(n.useEffect)((function(){!l.isLoadingOrderNumber&&l.number&&a(!0)}),[l.number]);var w=Object(y.jsx)(ue,{onClose:function(){a(!1)},title:"",children:Object(y.jsx)(ne,{orderNumber:l.number.toString()})});return Object(y.jsxs)("section",{style:{width:"50%"},ref:v,id:"section-burger-constructor",children:[Object(y.jsxs)("div",{ref:k,children:[x?Object(y.jsx)("div",{className:"".concat(ee.a.bunItem," p-2 mr-5"),children:Object(y.jsx)(h.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(x.name," (\u0432\u0435\u0440\u0445)"),thumbnail:x.image?x.image:"",price:x.price?x.price:0})}):Object(y.jsx)("div",{className:"".concat(ee.a.emptyItems," m-2 p-2"),children:Object(y.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u043a\u043e\u0441\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})}),C&&Object(y.jsx)("div",{className:"".concat(ee.a.mainItem," m-5 p-2")})]}),_.length>0?Object(y.jsx)("ul",{className:ee.a.itemList,children:_.map((function(e,t){return Object(y.jsx)(fe,{item:e,index:t,setCurrentIndex:o},e.key)}))}):Object(y.jsx)("div",{className:"".concat(ee.a.emptyItems," m-2 p-2"),children:Object(y.jsx)("p",{className:"text text_type_main-default",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b"})}),Object(y.jsx)("div",{className:"".concat(ee.a.bunItem," p-2"),children:x&&Object(y.jsx)(h.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(x.name," (\u043d\u0438\u0437)"),thumbnail:x.image?x.image:"",price:x.price?x.price:0})}),Object(y.jsxs)("div",{className:"".concat(ee.a.orderFooter," p-5"),children:[Object(y.jsxs)("p",{className:"text text_type_digits-medium",children:[u.total," ",Object(y.jsx)(h.CurrencyIcon,{type:"primary"})]}),j.isAuthenticated&&u.bun?Object(y.jsx)(h.Button,{type:"primary",size:"large",onClick:function(){var e=[];null!=x&&x&&e.push(x._id),_.forEach((function(t){t._id&&e.push(t._id)})),b(function(e){return function(t){t({type:le}),D(e).then((function(e){return console.log(e),e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){if(!e.order.number)throw new Error("No data");t({type:je,orderNumber:e.order.number})})).catch((function(e){t({type:be})}))}}(e))},children:l.isLoadingOrderNumber?"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043d\u043e\u043c\u0435\u0440...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):Object(y.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),r&&w]})]})};var he=function(){return Object(y.jsxs)("div",{className:l.a.app,children:[Object(y.jsx)("h1",{className:"".concat(l.a.sectionHeader," pt-5 pb-1"),children:Object(y.jsx)("span",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(y.jsx)("main",{className:l.a.mainDashboard,children:Object(y.jsxs)(j.a,{backend:b.a,children:[Object(y.jsx)(Y,{}),Object(y.jsx)(xe,{})]})})]})},_e=r(18),ge=r(31),ve=r.n(ge),ye="LOGIN_REQUEST",Ne="LOGIN_SUCCESS",Ee="LOGIN_FAILED",Ce="LOGOUT_REQUEST",ke="LOGOUT_SUCCESS",we="LOGOUT_FAILED",Se="REGISTER_USER_REQUEST",Te="REGISTER_USER_SUCCESS",Ie="REGISTER_USER_FAILED",Le="GET_USER_REQUEST",Re="GET_USER_SUCCESS",De="GET_USER_FAILED",Pe="SET_USER_REQUEST",Ae="SET_USER_SUCCESS",Be="SET_USER_FAILED",We="REFRESH_TOKEN_REQUEST",Ue="REFRESH_TOKEN_SUCCESS",Ge="REFRESH_TOKEN_FAILED",Fe="RESET_PASSWORD_REQUEST",Me="RESET_PASSWORD_SUCCESS",He="RESET_PASSWORD_FAILED",ze="SET_NEW_PASSWORD_REQUEST",Je="SET_NEW_PASSWORD_SUCCESS",Qe="SET_NEW_PASSWORD_FAILED",Ke=function(){return function(e){e({type:Le}),W().then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(t){if(!t.user)throw new Error("No data");e({type:Re,data:t})})).catch((function(t){e({type:De,error:t})}))}};var Ze=function(){var e=Object(d.h)(),t=f(),r=O((function(e){return Object(p.a)({},e.auth)})),a=Object(n.useState)({email:"",password:""}),c=Object(m.a)(a,2),i=c[0],s=c[1],u=function(e){s(Object(p.a)(Object(p.a)({},i),{},Object(_e.a)({},e.target.name,e.target.value)))},l=Object(n.useCallback)((function(e){e.preventDefault(),t(function(e){return function(t){t({type:ye}),P(e).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){if(!e.accessToken)throw new Error("No data");t({type:Ne,data:e})})).catch((function(e){t({type:Ee,error:e})}))}}(i))}),[r,i]);if(r.isAuthenticated){if(e.state)e.state.from&&e.state.from.pathname;return Object(y.jsx)(d.a,{to:{pathname:"/",state:{background:e.state&&e.state.from}}})}return Object(y.jsx)("div",{className:ve.a.container,children:Object(y.jsxs)("div",{className:ve.a.wrapper,children:[Object(y.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(y.jsxs)("form",{onSubmit:l,children:[Object(y.jsx)("div",{className:ve.a.inputContainer,id:"input-email",children:Object(y.jsx)(h.Input,{type:"text",placeholder:"E-mail",name:"email",onChange:u,value:i.email})}),Object(y.jsx)("div",{id:"input-password",className:ve.a.inputContainer,children:Object(y.jsx)(h.PasswordInput,{name:"password",onChange:u,value:i.password})}),Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(y.jsx)(o.b,{to:"/register",className:ve.a.navLinks,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(y.jsx)(o.b,{to:"/forgot-password",className:ve.a.navLinks,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})};var qe=function(){return Object(y.jsx)(Ze,{})},Ve=r(32),Ye=r.n(Ve);var Xe=function(){var e=O((function(e){return e.auth})),t=f(),r=Object(n.useState)({name:"",email:"",password:""}),a=Object(m.a)(r,2),c=a[0],i=a[1],s=function(e){i(Object(p.a)(Object(p.a)({},c),{},Object(_e.a)({},e.target.name,e.target.value)))},u=Object(n.useCallback)((function(e){e.preventDefault(),t(function(e){return function(t){t({type:Se}),A(e).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){if(!e.accessToken)throw new Error("No data");t({type:Te,data:e})})).catch((function(e){t({type:Ie,error:e})}))}}(c))}),[c,t]);return e.isAuthenticated?Object(y.jsx)(d.a,{to:{pathname:"/"}}):Object(y.jsx)("div",{className:Ye.a.container,children:Object(y.jsxs)("div",{className:Ye.a.wrapper,children:[Object(y.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(y.jsxs)("form",{onSubmit:u,children:[Object(y.jsx)("div",{className:Ye.a.inputContainer,children:Object(y.jsx)(h.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",onChange:s,value:c.name})}),Object(y.jsx)("div",{className:Ye.a.inputContainer,children:Object(y.jsx)(h.Input,{type:"text",placeholder:"E-mail",name:"email",onChange:s,value:c.email})}),Object(y.jsx)("div",{className:Ye.a.inputContainer,children:Object(y.jsx)(h.PasswordInput,{name:"password",onChange:s,value:c.password})}),Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(y.jsx)(o.b,{to:"/login",className:Ye.a.navLinks,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})};var $e=function(){return Object(y.jsx)(Xe,{})},et=r(49),tt=r.n(et);var rt=function(){var e=f(),t=O((function(e){return Object(p.a)({},e.auth)})),r=Object(d.g)(),a=Object(n.useState)({email:""}),c=Object(m.a)(a,2),i=c[0],s=c[1],u=Object(n.useCallback)((function(t){t.preventDefault(),e(function(e){return function(t){t({type:Fe}),F(e).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){t({type:Me,data:e})})).catch((function(e){t({type:He,error:e})}))}}(i)),r.replace("/reset-password")}),[t,i]);return t.isAuthenticated?Object(y.jsx)(d.a,{to:{pathname:"/"}}):Object(y.jsx)("div",{className:tt.a.container,children:Object(y.jsxs)("div",{className:tt.a.wrapper,children:[Object(y.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(y.jsxs)("form",{onSubmit:u,children:[Object(y.jsx)("div",{className:tt.a.inputContainer,children:Object(y.jsx)(h.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",onChange:function(e){s(Object(p.a)(Object(p.a)({},i),{},Object(_e.a)({},e.target.name,e.target.value)))},value:i.email})}),Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(y.jsx)(o.b,{to:"/login",className:tt.a.navLinks,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})};var nt=function(){return Object(y.jsx)(rt,{})},at=r(37),ct=r.n(at);var it=function(){var e=f(),t=O((function(e){return Object(p.a)({},e.auth)})),r=Object(d.g)(),a=Object(n.useState)({password:"",token:""}),c=Object(m.a)(a,2),i=c[0],s=c[1],u=function(e){s(Object(p.a)(Object(p.a)({},i),{},Object(_e.a)({},e.target.name,e.target.value)))},l=Object(n.useCallback)((function(n){n.preventDefault(),e(function(e){return function(t){t({type:ze}),M(e).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){t({type:Je})})).catch((function(e){t({type:Qe,error:e})}))}}(i)),t.hasError||r.replace("/login")}),[t,i,e,r]);return t.isAuthenticated?Object(y.jsx)(d.a,{to:{pathname:"/"}}):Object(y.jsx)("div",{className:ct.a.container,children:Object(y.jsxs)("div",{className:ct.a.wrapper,children:[Object(y.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(y.jsxs)("form",{onSubmit:l,children:[Object(y.jsx)("div",{className:ct.a.inputContainer,children:Object(y.jsx)(h.PasswordInput,{name:"password",onChange:u,value:i.password})}),Object(y.jsx)("div",{className:ct.a.inputContainer,children:Object(y.jsx)(h.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"token",onChange:u,value:i.token})}),Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(y.jsx)(o.b,{to:"/login",className:ct.a.navLinks,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})};var st=function(){return Object(y.jsx)(it,{})},ot=r(30),dt=r.n(ot),ut=r(22),lt=r.n(ut);var jt=function(){var e=Object(d.g)(),t=O((function(e){return e.auth})),r=f(),a=Object(n.useCallback)((function(){r((function(e){e({type:Ce}),G({token:T("refreshToken")}).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(t){e({type:ke})})).catch((function(t){e({type:we,error:t})}))}))}),[t,e]);return Object(n.useEffect)((function(){t.isAuthenticated||(console.log("history.replace({pathname: '/login'});"),e.replace({pathname:"/login"}))}),[t.isAuthenticated]),Object(y.jsxs)("div",{className:lt.a.menuWrapper,children:[Object(y.jsxs)("ul",{className:lt.a.profileMenu,children:[Object(y.jsx)("li",{className:lt.a.profileMenuItem,children:Object(y.jsx)(o.c,{to:{pathname:"/profile"},className:lt.a.link,children:Object(y.jsx)("span",{className:"text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})})}),Object(y.jsx)("li",{className:lt.a.profileMenuItem,children:Object(y.jsx)(o.c,{to:{pathname:"/profile/orders"},className:lt.a.link,children:Object(y.jsx)("span",{className:"text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}),Object(y.jsx)("li",{className:lt.a.profileMenuItem,children:Object(y.jsx)(o.c,{to:{pathname:"/login"},className:lt.a.link,activeClassName:lt.a.linkActive,children:Object(y.jsx)("span",{className:"text text_type_main-medium",onClick:a,children:"\u0412\u044b\u0445\u043e\u0434"})})})]}),Object(y.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},bt=r(38),pt=r.n(bt);var mt=function(){var e=f(),t=O((function(e){return Object(p.a)({},e.auth)})),r=Object(n.useRef)(null),a=Object(n.useRef)(null);Object(n.useEffect)((function(){e(Ke())}),[]);var c=Object(n.useState)({name:t.user.name,email:t.user.email,password:""}),i=Object(m.a)(c,2),s=i[0],o=i[1],d=function(e){o(Object(p.a)(Object(p.a)({},s),{},Object(_e.a)({},e.target.name,e.target.value)))},u=function(e){e.preventDefault(),r.current&&(r.current.value=t.user.name),a.current&&(a.current.value=t.user.email)};return Object(y.jsx)("div",{className:pt.a.settingsWrapper,children:Object(y.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(t){t({type:Pe}),U(e).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(e){if(!e.user)throw new Error("No data");t({type:Ae,data:e})})).catch((function(e){t({type:Be,error:e})}))}}(s))},children:[Object(y.jsx)("div",{className:pt.a.inputContainer,children:Object(y.jsx)(h.Input,{ref:r,type:"text",placeholder:"\u0418\u043c\u044f",name:"name",onChange:d,value:s.name,icon:"EditIcon"})}),Object(y.jsx)("div",{className:pt.a.inputContainer,children:Object(y.jsx)(h.Input,{ref:a,type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"email",value:s.email,onChange:d,icon:"EditIcon"})}),Object(y.jsx)("div",{className:pt.a.inputContainer,children:Object(y.jsx)(h.PasswordInput,{name:"password",onChange:d,value:s.password})}),Object(y.jsxs)("div",{className:pt.a.buttonsBlock,children:[Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(y.jsx)("div",{className:"mb-20",children:Object(y.jsx)(h.Button,{type:"secondary",size:"medium",onClick:function(){return u},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})]})})};var Ot=function(){return Object(y.jsx)("div",{className:dt.a.profileContainer,children:Object(y.jsxs)("div",{className:dt.a.profileWrapper,children:[Object(y.jsx)(jt,{}),Object(y.jsx)(mt,{})]})})};var ft=function(){return Object(y.jsx)(Ot,{})},xt=r(59),ht=r.n(xt);var _t=function(){return Object(y.jsx)("div",{className:ht.a.container,children:Object(y.jsxs)("div",{className:ht.a.wrapper,children:[Object(y.jsx)("p",{className:"text text_type_main-medium text_color_inactive mb-6",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(y.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-6",children:["\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 ",Object(y.jsx)(o.b,{to:"/",className:ht.a.link,children:"\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]})})},gt=r(27),vt=r.n(gt);var yt=function(){var e=Object(d.i)().id,t=O((function(e){return e.ingredients.ingredients})).filter((function(t){return t._id===e}))[0];return t?Object(y.jsxs)("div",{className:vt.a.bodyContent,children:[Object(y.jsx)("img",{src:t.image_large,alt:t.name}),Object(y.jsx)("p",{className:"text text_type_main-medium p-5",children:t.name}),Object(y.jsx)("p",{className:"text text_type_main-default p-5",children:t.name}),Object(y.jsxs)("div",{className:vt.a.details,children:[Object(y.jsxs)("div",{className:vt.a.secondaryText,children:[Object(y.jsx)("p",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(y.jsx)("p",{className:"text text_type_digits-default",children:t.calories})]}),Object(y.jsxs)("div",{className:vt.a.secondaryText,children:[Object(y.jsx)("p",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(y.jsx)("p",{className:"text text_type_digits-default",children:t.proteins})]}),Object(y.jsxs)("div",{className:vt.a.secondaryText,children:[Object(y.jsx)("p",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(y.jsx)("p",{className:"text text_type_digits-default",children:t.fat})]}),Object(y.jsxs)("div",{className:vt.a.secondaryText,children:[Object(y.jsx)("p",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(y.jsx)("p",{className:"text text_type_digits-default",children:t.carbohydrates})]})]})]}):Object(y.jsx)("div",{className:vt.a.bodyContent,children:Object(y.jsx)("span",{children:"NO"})})};var Nt=function(){var e=Object(d.i)().id,t=f();Object(n.useEffect)((function(){t(V())}),[t]);var r=O((function(e){return Object(p.a)({},e.ingredients)})).ingredients.filter((function(t){return t._id===e}))[0];return Object(y.jsx)(yt,Object(p.a)({},r))},Et=r(109),Ct=["children"];function kt(e){var t=e.children,r=Object(Et.a)(e,Ct),a=f(),c=Object(n.useState)(!1),i=Object(m.a)(c,2),s=i[0],o=i[1],u=O((function(e){return e.auth})),l=function(){var e=Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Ke());case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),s?Object(y.jsx)(d.b,Object(p.a)(Object(p.a)({},r),{},{render:function(e){var r=e.location;return u.isAuthenticated?t:Object(y.jsx)(d.a,{to:{pathname:"/login",state:{from:r}}})}})):null}var wt=r(33),St=r.n(wt);var Tt=function(){var e=O((function(e){return Object(p.a)({},e.auth)}));return Object(y.jsx)("header",{className:St.a.header,children:Object(y.jsxs)("nav",{className:St.a.nav,children:[Object(y.jsxs)("div",{className:"pl-30",children:[Object(y.jsxs)(o.b,{className:St.a.navItem,to:"/",children:[Object(y.jsx)(h.BurgerIcon,{type:"secondary"})," ",Object(y.jsx)("span",{className:"text text_type_main-default pl-2",children:" \u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(y.jsxs)(o.b,{className:St.a.navItem,to:"/feed",children:[Object(y.jsx)(h.ListIcon,{type:"secondary"})," ",Object(y.jsx)("span",{className:"text text_type_main-default pl-2",children:" \u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)(h.Logo,{})}),Object(y.jsx)("div",{className:"pr-30",children:e.isAuthenticated?Object(y.jsxs)(o.b,{to:"/profile",className:St.a.navItem,children:[Object(y.jsx)(h.ProfileIcon,{type:"secondary"})," ",Object(y.jsx)("span",{className:"text text_type_main-default pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]}):Object(y.jsxs)(o.b,{to:"/login",className:St.a.navItem,children:[Object(y.jsx)(h.ProfileIcon,{type:"secondary"})," ",Object(y.jsx)("span",{className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},It=r(82),Lt=r.n(It),Rt=r(50),Dt=r.n(Rt);function Pt(e){var t=new Date(e),r=(new Date).getDate()-t.getDate();return(0===r?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===r?"\u0412\u0447\u0435\u0440\u0430":r<=4?r+" \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434":r+" \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434")+", "+t.toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow",timeZoneName:"short",hour:"2-digit",minute:"2-digit"})}function At(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"pending":return"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";default:return"\u0421\u043e\u0437\u0434\u0430\u043d"}}var Bt=function(e){var t=O((function(e){return Object(p.a)({},e.ingredients)})).ingredients.filter((function(t){return-1!==e.ingredients.indexOf(t._id)})),r=t.reduce((function(e,t){return t.price+e}),0);return Object(y.jsxs)("li",{className:Dt.a.order,children:[Object(y.jsxs)("div",{className:"mb-5 ".concat(Dt.a.orderHeader),children:[Object(y.jsx)("div",{children:Object(y.jsxs)("span",{className:"text text_type_digits-default",children:["#",e.number]})}),Object(y.jsx)("div",{children:Object(y.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:Pt(e.createdAt)})})]}),Object(y.jsx)("h2",{className:"text text_type_main-medium mb-5",children:e.name}),Object(y.jsx)("p",{className:"text text_type_main-default mb-5",children:At(e.status)}),Object(y.jsxs)("div",{className:"mb-5 ".concat(Dt.a.orderHeader),children:[Object(y.jsx)("div",{children:t.map((function(e){return Object(y.jsx)("img",{src:e.image_mobile,alt:"ingredient-preview-".concat(e._id),className:Dt.a.ingredientPreview},e._id)}))}),Object(y.jsx)("div",{children:Object(y.jsxs)("span",{className:"text text_type_digits-default",children:[r," ",Object(y.jsx)(h.CurrencyIcon,{type:"primary"})]})})]})]})};var Wt=function(e){var t=Object(d.h)();return Object(y.jsx)("ul",{className:Lt.a.ordersList,children:e.orders.map((function(e){return Object(y.jsx)(o.b,{to:{pathname:"/feed/".concat(e._id),state:{background:t}},className:Lt.a.orderLink,children:Object(y.jsx)(Bt,Object(p.a)({},e))},e._id)}))})};var Ut=function(e){return Object(y.jsxs)("div",{className:"mb-15",children:[Object(y.jsx)("h2",{className:"text text_type_main-medium",children:e.title}),Object(y.jsx)("p",{className:"text text_type_digits-large",children:e.count})]})},Gt=r(24),Ft=r.n(Gt);var Mt=function(e){var t=e.orders.filter((function(e){return"pending"===e.status})).slice(0,20),r=e.orders.filter((function(e){return"done"===e.status})).slice(0,20);return Object(y.jsxs)("div",{className:Ft.a.containerWrapper,children:[Object(y.jsxs)("div",{className:Ft.a.statusContainer,children:[Object(y.jsx)("h2",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(y.jsx)("ul",{className:r.length<=10?Ft.a.ordersListOneColumn:Ft.a.ordersListTwoColumn,children:r.map((function(e){return Object(y.jsx)("li",{className:"text text_type_digits-default ".concat(Ft.a.ordersDone),children:e.number},e._id)}))})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(y.jsx)("ul",{className:t.length<=10?Ft.a.ordersListOneColumn:Ft.a.ordersListTwoColumn,children:t.map((function(e){return Object(y.jsx)("li",{className:"text text_type_digits-default ".concat(Ft.a.ordersWork),children:e.number},e._id)}))})]})]})},Ht="WS_CONNECTION_START",zt="WS_CONNECTION_SUCCESS",Jt="WS_CONNECTION_ERROR",Qt="WS_CONNECTION_CLOSED",Kt="WS_GET_MESSAGE";var Zt=function(){var e=f(),t=O((function(e){return Object(p.a)({},e.feed)})),r=t.orders,a=t.total,c=t.totalToday;return Object(n.useEffect)((function(){e({type:Ht})}),[e]),Object(n.useEffect)((function(){e(V())}),[e]),Object(y.jsxs)("div",{className:l.a.app,children:[Object(y.jsx)("h1",{className:"pl-5 pt-5 pb-1",children:Object(y.jsx)("span",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(y.jsxs)("div",{className:l.a.mainDashboard,children:[Object(y.jsx)("div",{className:l.a.sectionColumn,children:Object(y.jsx)(Wt,{orders:r})}),Object(y.jsxs)("div",{className:l.a.sectionColumn,children:[Object(y.jsx)(Mt,{orders:r}),Object(y.jsx)(Ut,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",count:a}),Object(y.jsx)(Ut,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",count:c})]})]})]})},qt=r(28),Vt=r.n(qt);var Yt=function(){var e=Object(d.i)().id,t=Object(d.h)(),r=f();Object(n.useEffect)((function(){r(V()),t.state.background&&t.state.background.pathname.indexOf("/profile/orders")>-1?r({type:Ht,payload:T("token")}):r({type:Ht})}),[]);var a=O((function(e){return Object(p.a)({},e.feed)})).orders,c=O((function(e){return Object(p.a)({},e.ingredients)})).ingredients;if(a.length>0&&c.length>0){var i=a.find((function(t){return t._id===e})),s=c.filter((function(e){return-1!==i.ingredients.indexOf(e._id)})),o=s.reduce((function(e,t){return t.price+e}),0);return Object(y.jsxs)("div",{className:Vt.a.wrapper,children:[Object(y.jsx)("div",{className:"mb-15",children:Object(y.jsxs)("p",{className:"text text_type_digits-default",children:["#",i.number]})}),Object(y.jsxs)("div",{className:"mb-15",children:[Object(y.jsx)("h2",{className:"text text_type_main-medium mb-5",children:i.name}),Object(y.jsx)("p",{className:"text text_type_main-default mb-5 ".concat(Vt.a.ordersDone),children:At(i.status)})]}),Object(y.jsx)("h2",{className:"text text_type_main-medium mb-5",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(y.jsx)("ul",{className:Vt.a.ingredientsWrapper,children:s.map((function(e){return Object(y.jsxs)("li",{className:Vt.a.ingredientWrapper,children:[Object(y.jsxs)("div",{className:Vt.a.ingredient,children:[Object(y.jsx)("img",{src:e.image_mobile,alt:"ingredient-preview-".concat(e._id),className:Vt.a.ingredientPreview}),Object(y.jsx)("span",{className:"text text_type_main-default ml-4",children:e.name})]}),Object(y.jsxs)("span",{className:"text text_type_digits-default",children:["1 x ",e.price," ",Object(y.jsx)(h.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(y.jsxs)("div",{className:Vt.a.ingredientWrapper,children:[Object(y.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:Pt(i.createdAt)}),Object(y.jsxs)("span",{className:"text text_type_digits-default",children:[o," ",Object(y.jsx)(h.CurrencyIcon,{type:"primary"})]})]})]})}return Object(y.jsx)(y.Fragment,{})};var Xt=function(){return Object(y.jsx)("div",{className:"mt-15",style:{display:"flex",justifyContent:"center"},children:Object(y.jsx)(Yt,{})})},$t=r(83),er=r.n($t);var tr=function(e){var t=Object(d.h)();return Object(y.jsx)("ul",{className:er.a.ordersList,children:e.orders&&e.orders.map((function(e){return Object(y.jsx)(o.b,{to:{pathname:"/profile/orders/".concat(e._id),state:{background:t}},className:er.a.orderLink,children:Object(y.jsx)(Bt,Object(p.a)({},e))},e._id)}))})};var rr=function(){var e=f(),t=O((function(e){return Object(p.a)({},e.feed)})).orders;return Object(n.useEffect)((function(){e({type:Ht,payload:T("token")})}),[]),Object(y.jsx)("div",{className:dt.a.profileContainer,children:Object(y.jsxs)("div",{className:dt.a.profileWrapper,children:[Object(y.jsx)(jt,{}),Object(y.jsx)("div",{className:dt.a.feedWrapper,children:Object(y.jsx)(tr,{orders:t})})]})})};var nr=function(){return Object(y.jsx)(rr,{})};function ar(){var e=Object(d.h)(),t=Object(d.g)(),r="PUSH"===t.action&&e.state&&e.state.background;console.log(e.state);var n=function(){t.goBack()},a=Object(y.jsx)(ue,{onClose:n,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(y.jsx)(yt,{})}),c=Object(y.jsx)(ue,{onClose:n,title:"",children:Object(y.jsx)(Yt,{})});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Tt,{}),Object(y.jsxs)(d.d,{location:r||e,children:[Object(y.jsx)(d.b,{path:"/",exact:!0,children:Object(y.jsx)(he,{})}),Object(y.jsx)(d.b,{path:"/login",exact:!0,children:Object(y.jsx)(qe,{})}),Object(y.jsx)(d.b,{path:"/register",exact:!0,children:Object(y.jsx)($e,{})}),Object(y.jsx)(d.b,{path:"/forgot-password",exact:!0,children:Object(y.jsx)(nt,{})}),Object(y.jsx)(d.b,{path:"/reset-password",exact:!0,children:Object(y.jsx)(st,{})}),Object(y.jsx)(kt,{path:"/profile",exact:!0,children:Object(y.jsx)(ft,{})}),Object(y.jsx)(kt,{path:"/profile/orders",exact:!0,children:Object(y.jsx)(nr,{})}),Object(y.jsx)(kt,{path:"/profile/orders/:id",exact:!0,children:Object(y.jsx)(Xt,{})}),Object(y.jsx)(d.b,{path:"/ingredients/:id",exact:!0,children:Object(y.jsx)(Nt,{})}),Object(y.jsx)(d.b,{path:"/feed",exact:!0,children:Object(y.jsx)(Zt,{})}),Object(y.jsx)(d.b,{path:"/feed/:id",exact:!0,children:Object(y.jsx)(Xt,{})}),Object(y.jsx)(d.b,{children:Object(y.jsx)(_t,{})})]}),r&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.b,{path:"/ingredients/:id",children:a}),Object(y.jsx)(d.b,{path:"/feed/:id",children:c}),Object(y.jsx)(d.b,{path:"/profile/orders/:id",children:c})]})]})}var cr=function(){var e=O((function(e){return e.auth})),t=f();return Object(n.useEffect)((function(){!e.isAuthenticated&&T("token")&&t(Ke())}),[]),Object(n.useEffect)((function(){e.tokenExpired&&T("refreshToken")&&(t((function(e){e({type:We}),B({token:T("refreshToken")}).then((function(e){return e&&e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).then((function(t){e({type:Ue,data:t})})).catch((function(t){e({type:Ge,error:t})}))})),t(Ke()))}),[e.isAuthenticated]),Object(y.jsx)(o.a,{children:Object(y.jsx)(ar,{})})},ir=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,198)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},sr=r(26),or={ingredients:[],isLoadingIngredients:!1,hasErrorIngredients:!1,currentIngredient:null},dr=r(197),ur={currentBurger:{bun:null,main:[],total:0},currentIngredient:null,order:{number:0,isLoadingOrderNumber:!1,hasErrorOrderNumber:!1}},lr={user:{name:"",email:"",password:""},isAuthenticated:!1,isLoading:!1,hasError:!1,tokenExpired:!1},jr=r(108),br={orders:[],total:0,totalToday:0,wsConnected:!1,messages:[],error:""},pr=Object(sr.combineReducers)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(p.a)(Object(p.a)({},e),{},{isLoadingIngredients:!0,hasErrorIngredients:!1});case z:return Object(p.a)(Object(p.a)({},e),{},{ingredients:t.ingredients,isLoadingIngredients:!1});case J:return Object(p.a)(Object(p.a)({},e),{},{isLoadingIngredients:!1,hasErrorIngredients:!0});case Q:return Object(p.a)(Object(p.a)({},e),{},{currentIngredient:t.currentIngredient});case K:return Object(p.a)(Object(p.a)({},e),{},{currentIngredient:or.currentIngredient});case Z:var r=t.ingredient,n=e.ingredients;if("bun"===r.type)n.forEach((function(e){"bun"===e.type&&(e._id===r._id?e.counter=2:e.counter=0)}));else{var a=e.ingredients.findIndex((function(e){return e._id===r._id}));r=r.counter?Object(p.a)(Object(p.a)({},r),{},{counter:r.counter+1}):Object(p.a)(Object(p.a)({},r),{},{counter:1}),n.splice(a,1,r)}return Object(p.a)(Object(p.a)({},e),{},{ingredients:n});case q:var c=e.ingredients,i=e.ingredients.find((function(e){return e._id===t.ingredient._id})),s=e.ingredients.findIndex((function(e){return e._id===t.ingredient._id}));return i&&(i=i.counter?Object(p.a)(Object(p.a)({},i),{},{counter:i.counter-1}):Object(p.a)(Object(p.a)({},i),{},{counter:0}),c.splice(s,1,i)),Object(p.a)(Object(p.a)({},e),{},{ingredients:c});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(p.a)(Object(p.a)({},e),{},{order:Object(p.a)(Object(p.a)({},e.order),{},{isLoadingOrderNumber:!0,hasErrorOrderNumber:!1})});case je:return Object(p.a)(Object(p.a)({},e),{},{currentBurger:Object(p.a)(Object(p.a)({},ur.currentBurger),{},{main:[]}),order:Object(p.a)(Object(p.a)({},e.order),{},{number:t.orderNumber,isLoadingOrderNumber:!1})});case be:return Object(p.a)(Object(p.a)({},e),{},{order:Object(p.a)(Object(p.a)({},e.order),{},{isLoadingOrderNumber:!1,hasErrorOrderNumber:!0})});case pe:var r=t.ingredient,n=ur;if("bun"===r.type)n=Object(p.a)(Object(p.a)({},e),{},{currentBurger:Object(p.a)(Object(p.a)({},e.currentBurger),{},{bun:r})});else{r.key=Object(dr.a)();var a=e.currentBurger.main;a.splice(t.ingredientIndex,0,r),n=Object(p.a)(Object(p.a)({},e),{},{currentBurger:Object(p.a)(Object(p.a)({},e.currentBurger),{},{main:a})})}var c=0;return n.currentBurger.bun&&n.currentBurger.bun.price&&(c=2*n.currentBurger.bun.price),n.currentBurger.main.forEach((function(e){c+=e.price})),n=Object(p.a)(Object(p.a)({},n),{},{currentBurger:Object(p.a)(Object(p.a)({},n.currentBurger),{},{total:c})});case me:var i=e.currentBurger.main,s=i.splice(t.oldIndex,1);return i.splice(t.currentIndex,0,s[0]),Object(p.a)(Object(p.a)({},e),{},{currentBurger:Object(p.a)(Object(p.a)({},e.currentBurger),{},{main:i})});case Oe:var o=e.currentBurger.main;o.splice(t.ingredientIndex,1);var d=0;return e.currentBurger.bun&&e.currentBurger.bun.price&&(d=2*e.currentBurger.bun.price),o.forEach((function(e){d+=e.price})),Object(p.a)(Object(p.a)({},e),{},{currentBurger:Object(p.a)(Object(p.a)({},e.currentBurger),{},{main:o,total:d})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1,isAuthenticated:!1});case Ne:return t.data.accessToken&&(I("token",t.data.accessToken.split("Bearer ")[1]),I("refreshToken",t.data.refreshToken)),Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,isAuthenticated:!0,user:t.data.user});case Ee:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case Ce:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case ke:return L("token"),L("refreshToken"),Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,isAuthenticated:!1,user:lr.user});case we:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case Se:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Te:return t.data.accessToken&&(I("token",t.data.accessToken.split("Bearer ")[1]),I("refreshToken",t.data.refreshToken)),Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,isAuthenticated:!0,user:t.data.user});case Ie:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case Le:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Re:return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.data.user});case De:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0,tokenExpired:!0});case Pe:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Ae:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,user:t.data.user});case Be:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case We:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Ue:return t.data.accessToken&&(I("token",t.data.accessToken.split("Bearer ")[1]),I("refreshToken",t.data.refreshToken)),Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,tokenExpired:!1});case Ge:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case Fe:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Me:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case He:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});case ze:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,hasError:!1});case Je:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Qe:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1,hasError:!0});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:return Object(p.a)(Object(p.a)({},e),{},{error:"",wsConnected:!0});case Jt:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload,wsConnected:!1});case Qt:return Object(p.a)(Object(p.a)({},e),{},{error:"",wsConnected:!1});case Kt:return Object(p.a)(Object(p.a)({},e),{},{error:"",messages:e.messages.length?[].concat(Object(jr.a)(e.messages),[t.payload]):[t.payload],orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}}}),mr=r(105),Or=r(106),fr=Object(mr.composeWithDevTools)(Object(sr.applyMiddleware)(Or.a,(function(e){var t=null;return function(r){return function(n){var a=e.dispatch,c=n.type,i=n.payload;c===Ht&&(t&&t.close(1e3,"reconnect needed"),t=i?new WebSocket("wss://norma.nomoreparties.space/orders?token=".concat(i)):new WebSocket("wss://norma.nomoreparties.space/orders/all")),t&&(t.onopen=function(e){a({type:zt,payload:void 0})},t.onerror=function(e){a({type:Jt,payload:e.toString()})},t.onmessage=function(e){var t=JSON.parse(e.data);a({type:Kt,payload:t})},t.onclose=function(e){a({type:Qt,payload:void 0})},"WS_SEND_MESSAGE"===c&&t.send(JSON.stringify(i))),r(n)}}}))),xr=Object(sr.createStore)(pr,fr);s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(c.a,{store:xr,children:Object(y.jsx)(cr,{})})}),document.getElementById("root")),ir()},21:function(e,t,r){e.exports={itemList:"burger-constructor_itemList__1nrax",emptyItems:"burger-constructor_emptyItems__2Tzzq",mainItem:"burger-constructor_mainItem__1Qrfg",bunItem:"burger-constructor_bunItem__1hQCw",orderFooter:"burger-constructor_orderFooter__mJC8p"}},22:function(e,t,r){e.exports={menuWrapper:"profile-menu_menuWrapper__10hlq",profileMenu:"profile-menu_profileMenu__39xUA mb-20",profileMenuItem:"profile-menu_profileMenuItem__2azjH",link:"profile-menu_link__12i5k",linkActive:"profile-menu_linkActive__3YnWG"}},23:function(e,t,r){e.exports={app:"app_app__2Vmi5",mainDashboard:"app_mainDashboard__2I-_y",sectionHeader:"app_sectionHeader__1mm4A",sectionColumn:"app_sectionColumn__2URuH"}},24:function(e,t,r){e.exports={containerWrapper:"feed-orders-status_containerWrapper__aLpZE mb-15",statusContainer:"feed-orders-status_statusContainer__aN8OL",ordersListOneColumn:"feed-orders-status_ordersListOneColumn__1Q0gr",ordersListTwoColumn:"feed-orders-status_ordersListTwoColumn__OVkFd",ordersWork:"feed-orders-status_ordersWork__2g50J",ordersDone:"feed-orders-status_ordersDone__ZxD29"}},27:function(e,t,r){e.exports={bodyContent:"ingredient-details_bodyContent__1Kp23",details:"ingredient-details_details__3hw-F mt-10",secondaryText:"ingredient-details_secondaryText__ndjou text text_type_main-default"}},28:function(e,t,r){e.exports={wrapper:"order-info_wrapper__2jCnJ",ingredientsWrapper:"order-info_ingredientsWrapper__3YACJ",ingredientWrapper:"order-info_ingredientWrapper__3cgdH",ingredient:"order-info_ingredient__37anJ",ordersDone:"order-info_ordersDone__q3GBf",ingredientPreview:"order-info_ingredientPreview__393k_"}},30:function(e,t,r){e.exports={profileContainer:"profile_profileContainer__UL2PL",profileWrapper:"profile_profileWrapper__3EAeK",feedWrapper:"profile_feedWrapper__2xoIn"}},31:function(e,t,r){e.exports={container:"login_container__3oldr",wrapper:"login_wrapper__2Vyci",inputContainer:"login_inputContainer__2QxM0 mb-6",navLinks:"login_navLinks__DZraF"}},32:function(e,t,r){e.exports={container:"register_container__2Kyfl",wrapper:"register_wrapper__1ka0t",inputContainer:"register_inputContainer__2g3q4 mb-6",navLinks:"register_navLinks__1N0tu"}},33:function(e,t,r){e.exports={nav:"app-header_nav__2q0wn",navItem:"app-header_navItem___qQNa"}},37:function(e,t,r){e.exports={container:"reset-password_container__2yQWa",wrapper:"reset-password_wrapper__3_zkA",inputContainer:"reset-password_inputContainer__1VhgH mb-6",navLinks:"reset-password_navLinks__3HvP2"}},38:function(e,t,r){e.exports={inputContainer:"profile-settings_inputContainer__oOfWA mb-6",settingsWrapper:"profile-settings_settingsWrapper__2DOZJ ml-20",buttonsBlock:"profile-settings_buttonsBlock__2WfNH"}},47:function(e,t,r){e.exports={ingredients:"burger-ingredients_ingredients__3zdK8",ingredientLink:"burger-ingredients_ingredientLink__2qMXV"}},48:function(e,t,r){e.exports={modalContent:"modal_modalContent__1vZRi p-5",animatetop:"modal_animatetop__1rlbb",close:"modal_close__224dW",modalHeader:"modal_modalHeader__1KPtC pl-2 pr-2",modalMain:"modal_modalMain__37WS9 text p-5"}},49:function(e,t,r){e.exports={container:"forgot-password_container__1TB7b",wrapper:"forgot-password_wrapper__fiEau",inputContainer:"forgot-password_inputContainer__25TdR mb-6",navLinks:"forgot-password_navLinks__i14gn"}},50:function(e,t,r){e.exports={order:"feed-order_order__3hRXV",ordersList:"feed-order_ordersList__2PoXl",orderHeader:"feed-order_orderHeader__2GQA3",ingredientPreview:"feed-order_ingredientPreview__3xwWt",ingredientPreviewMore:"feed-order_ingredientPreviewMore__3YOgR",orderLink:"feed-order_orderLink__h3RLK"}},59:function(e,t,r){e.exports={container:"not-found-404_container__3zHhO",wrapper:"not-found-404_wrapper__I3lzT",link:"not-found-404_link__XiyQ-"}},80:function(e,t,r){e.exports={bodyContent:"order-details_bodyContent__12o7Y",secondaryText:"order-details_secondaryText__1NJz_ text text_type_main-default"}},82:function(e,t,r){e.exports={order:"feed_order__C8osY",ordersList:"feed_ordersList__1D9v1",orderHeader:"feed_orderHeader__1KDRB",ingredientPreview:"feed_ingredientPreview__1altZ",ingredientPreviewMore:"feed_ingredientPreviewMore__3Ziif",orderLink:"feed_orderLink__22_rt"}},83:function(e,t,r){e.exports={order:"profile-orders-feed_order__GA9bk",ordersList:"profile-orders-feed_ordersList__cYtZb",orderHeader:"profile-orders-feed_orderHeader__2DBFE",ingredientPreview:"profile-orders-feed_ingredientPreview__shjCm",ingredientPreviewMore:"profile-orders-feed_ingredientPreviewMore__1jF2D",orderLink:"profile-orders-feed_orderLink__3kcPG"}}},[[188,1,2]]]);
//# sourceMappingURL=main.2ab88b3a.chunk.js.map